---
name: Japanese Grammar Teaching Generation
description: 根據 JLPT 文法書格式，生成結構化的日文文法學習內容與選擇題
---

# 日文文法教學生成指南（JLPT Grammar Questions）

> 此技能指導 AI 根據 JLPT 文法書格式，生成結構化的日文文法學習內容與選擇題。
> 目標：讓學習者不僅會用，更能理解「為什麼這樣用」。

---

## 快速檢查清單

執行前後請確認以下項目：

- [ ] 文法項目包含完整結構（接続、翻訳、説明）
- [ ] **每個用法至少 3 個例句**
  - [ ] 第 1、2 句：基礎單句，展示用法核心
  - [ ] 第 3 句：**兩人長句對話**（至少 2-3 個來回）
  - [ ] 第 4 句（如有）：慣用語、諺語或歷史名言
- [ ] 例句漢字標註 `{假名}`
- [ ] 每個例句附中文翻譯
- [ ] **辨析區塊**比較相似文法差異（含正誤例句對照）
- [ ] **小提醒區塊**提醒學習者常犯錯誤
- [ ] **綜合練習題至少 5 題（題型多樣化）**
  - [ ] 第 1-2 題：正向題（正確答案是該文法）
  - [ ] 第 3 題：**陷阱題（正確答案是其他助詞/文法）**
  - [ ] 第 4 題：對話題（正確答案是該文法）
  - [ ] 第 5 題：**辨析題（測試易混淆文法的區分）**
- [ ] 選項為 4 個助詞或文法選擇
- [ ] **避免「無腦選該文法就對」的題目設計**
- [ ] 執行 TypeScript 類型檢查無錯誤

---

## 1. 文法項目結構

每個文法項目需包含以下必要欄位：

```typescript
{
  id: 'n4_grammar_ga_01',           // {level}_grammar_{pattern}_{編號}
  pattern: '〜が',                   // 文法模式
  connection: '名詞＋が',            // 接續方式
  translation: '中文以語序位置決定「主體」，無翻譯。',
  level: 'N4',
  explanation: [
    {
      usageId: 1,
      title: '用法標題',
      description: '詳細說明此用法的使用場景、語感、限制條件等。',
      examples: [
        // 第 1 句：基礎單句
        { japanese: '赤{あか}ちゃんが泣{な}いている。', chinese: '小孩在哭泣。' },
        // 第 2 句：基礎單句（不同情境）
        { japanese: '友達{ともだち}が来{き}ました。', chinese: '朋友來了。' },
        // 第 3 句：兩人長句對話（必要）
        {
          japanese: '「あっ、見{み}て！あそこで何{なに}かが動{うご}いているよ。」\n「本当{ほんとう}だ。猫{ねこ}が遊{あそ}んでいるみたいだね。」',
          chinese: '「啊，你看！那邊有什麼東西在動耶。」\n「真的耶。好像是貓咪在玩。」',
          note: '對話情境展示'
        },
        // 第 4 句：慣用語或名言（如有）
        {
          japanese: '「能{のう}ある鷹{たか}は爪{つめ}を隠{かく}す。」',
          chinese: '「真人不露相。」（有才能的老鷹會藏起爪子。）',
          note: '諺語'
        }
      ]
    }
  ],
  // 相似文法差異比較
  analysis: {
    title: '「〜が」與「〜は」的差異',
    description: '詳細說明兩者的區別、使用場景的不同...',
    points: [
      {
        rule: '規則說明：動詞句第一、二人稱時，動作的主體一般會使用「は」。若使用「が」，則語感上帶有弦外之音。',
        examples: [
          { japanese: '私{わたし}は昨日{きのう}の午後{ごご}、公園{こうえん}で遊{あそ}んでいました。', chinese: '我昨天下午，在公園裡玩耍。', note: '○ 一般陳述' },
          { japanese: '私{わたし}が行{い}きます。', chinese: '我去。（強調「由我」去）', note: '○ 強調主體' }
        ]
      }
    ]
  },
  // 小提醒：常犯錯誤
  tips: {
    title: '小提醒：學習者常犯錯誤',
    items: [
      {
        mistake: '誤將「は」與「が」混用',
        explanation: '說明為什麼容易犯這個錯誤，以及如何避免。',
        correct: { sentence: '猫{ねこ}が好{す}きです。', note: '○ 表達喜歡的對象用「が」' },
        incorrect: { sentence: '猫{ねこ}は好{す}きです。', note: '✕ 「は」用於主題，這裡語感不自然' }
      }
    ]
  },
  // 綜合練習題：至少 5 題
  quiz: [
    // 第 1-3 題：基礎填空
    {
      id: 'n4_quiz_ga_01',
      sentence: '鳥{とり}（　）空{そら}を飛{と}んでいる。',
      options: ['は', 'が', 'に', 'で'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！描述眼前看到的自然現象時，用「が」標記主體。',
        wrong: [
          '「は」錯誤：眼前發生的新事物用「が」，而非主題標記「は」。',
          '「に」錯誤：「に」表示地點或目標，這裡需要標記主語。',
          '「で」錯誤：「で」表示場所或手段，這裡需要標記主語。'
        ]
      }
    },
    {
      id: 'n4_quiz_ga_02',
      sentence: '雨{あめ}（　）降{ふ}ってきました。',
      options: ['は', 'が', 'に', 'で'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！描述自然現象時，用「が」標記主體。',
        wrong: [
          '「は」錯誤：自然現象的發生應用「が」，不用「は」。',
          '「に」錯誤：這裡需要標記主體「雨」，不是表示地點。',
          '「で」錯誤：「雨」是主體，不是場所或手段。'
        ]
      }
    },
    {
      id: 'n4_quiz_ga_03',
      sentence: '私{わたし}は日本語{にほんご}（　）できます。',
      options: ['は', 'が', 'を', 'に'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！「できる」的對象用「が」，這是固定搭配。',
        wrong: [
          '「は」錯誤：標準用法是「が」，「は」只用於對比。',
          '「を」錯誤：「できる」不是他動詞，不能用「を」。',
          '「に」錯誤：「できる」的對象必須用「が」。'
        ]
      }
    },
    // 第 4-5 題：兩人長句對話（必要）
    {
      id: 'n4_quiz_ga_04',
      sentence: '「あの人{ひと}、誰{だれ}？」\n「ああ、あの人{ひと}（　）新{あたら}しい課長{かちょう}だよ。昨日{きのう}から来{き}たんだ。」',
      options: ['は', 'が', 'を', 'に'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！回答「誰？」時，用「が」標記答案（新資訊）。',
        wrong: [
          '「は」錯誤：回答問題時需要用「が」標記新資訊，而非「は」。',
          '「を」錯誤：這是判斷句「AがBだ」，不需要「を」。',
          '「に」錯誤：判斷句不適用「に」。'
        ]
      }
    },
    {
      id: 'n4_quiz_ga_05',
      sentence: '「何{なに}（　）食{た}べたい？」\n「うーん、今日{きょう}は寒{さむ}いから、ラーメン（　）食{た}べたいな。」',
      options: ['が/が', 'を/が', 'が/を', 'を/を'],
      correctIndex: 0,
      explanation: {
        correct: '「が/が」正確！「〜たい」的對象用「が」。',
        wrong: [
          '「を/が」錯誤：第一空「〜たい」的對象用「が」更自然。',
          '「が/を」錯誤：第二空「〜たい」的對象也應用「が」。',
          '「を/を」錯誤：「〜たい」的對象用「が」更自然。'
        ]
      }
    }
  ]
}
```

---

## 2. 例句格式規範

### 2.1 例句數量與類型要求（重要）

每個用法的例句必須遵循以下結構：

| 順序 | 類型 | 說明 | 必要性 |
|------|------|------|--------|
| 第 1 句 | 基礎單句 | 展示用法的核心意義，簡短易懂 | ✅ 必要 |
| 第 2 句 | 基礎單句 | 不同情境的應用，加深理解 | ✅ 必要 |
| 第 3 句 | **兩人長對話** | 至少 2-3 個來回，展示實際使用場景 | ✅ 必要 |
| 第 4 句 | 慣用語/名言 | 諺語、歷史名言、固定搭配（如有） | ⭕ 選填 |

### 2.2 長對話格式（第 3 句）

對話必須使用 `\n` 換行，並包含足夠的上下文：

```typescript
{
  japanese: '「今日{きょう}の会議{かいぎ}、何時{なんじ}からですか？」\n「午後{ごご}2時{じ}からですよ。でも、資料{しりょう}がまだできていないんです。」\n「えっ、大丈夫{だいじょうぶ}ですか？手伝{てつだ}いましょうか？」',
  chinese: '「今天的會議幾點開始？」\n「下午 2 點開始喔。但是資料還沒做好。」\n「咦，沒問題嗎？要我幫忙嗎？」',
  note: '職場對話情境'
}
```

### 2.3 慣用語/名言格式（第 4 句）

若該文法有常見的諺語、歷史名言或固定搭配，應加入：

```typescript
{
  japanese: '「石{いし}の上{うえ}にも三年{さんねん}。」',
  chinese: '「鐵杵磨成針。」（在石頭上坐三年也會變暖。意指持之以恆。）',
  note: '諺語：強調堅持的重要性'
}
```

### 2.4 日文例句標記

| 規則 | 範例 |
|------|------|
| 漢字標註假名 | `赤{あか}ちゃんが泣{な}いている。` |
| 重點詞彙加底線 | 使用標記說明哪個詞是考點 |
| 文法參照 | `(「〜ている」⇒ #41-①)` |

### 2.5 翻譯格式

| 規則 | 範例 |
|------|------|
| 括號包覆 | `（小孩在哭泣。）` |
| 自然口語 | 使用台灣繁體中文自然表達 |
| 對話換行 | 日文對話換行，中文翻譯也要對應換行 |

---

## 3. 辨析區塊（相似文法差異）

用於比較相似文法的差異，幫助學習者區分容易混淆的文法項目。

### 3.1 辨析區塊結構

```typescript
{
  title: '表起點的「を」與「から」之異同',
  description: '「を」和「から」都可以表示起點，但使用場景和語感有明顯差異。以下詳細說明兩者的區別：',
  comparison: [
    {
      point: '「を」前接的場所，一定是動作主體曾經存在過的地方',
      explanation: '使用「を」時，說話者強調的是「離開」這個動作本身，前提是主體曾經在那個地方。而「から」則單純表示出發點，不強調是否曾經待在那裡。',
      correct: { sentence: '彼{かれ}は部屋{へや}を出{で}た。', note: '○ 他（原本在房間裡）離開了房間' },
      incorrect: { sentence: '彼{かれ}は窓{まど}を出{で}た。', note: '△ 窗戶不是人會「待著」的地方，用「から」更自然' },
      correctedVersion: { sentence: '彼{かれ}は窓{まど}から出{で}た。', note: '○ 他從窗戶出去了' }
    },
    {
      point: '若前接的名詞與「〜の中{なか}」併用時，只可使用「から」',
      explanation: '當使用「〜の中」來強調「裡面」這個概念時，離開的動作必須用「から」來表示。這是固定搭配，沒有例外。',
      correct: { sentence: '部屋{へや}の中{なか}から出{で}る。', note: '○ 從房間裡面出來' },
      incorrect: { sentence: '部屋{へや}の中{なか}を出{で}る。', note: '✕ 文法錯誤' }
    },
    {
      point: '表達「畢業」、「離家獨立」等抽象含意時，只可使用「を」',
      explanation: '這類用法中，「を出る」已經成為固定搭配，帶有「完成某階段、脫離某狀態」的抽象意義。',
      correct: { sentence: '大学{だいがく}を出{で}て、社会人{しゃかいじん}になった。', note: '○ 大學畢業後，成為社會人士' },
      incorrect: { sentence: '大学{だいがく}から出{で}て、社会人{しゃかいじん}になった。', note: '✕ 語意變成「從大學（建築物）出來」' }
    }
  ],
  summary: '總結：使用「を」時強調「脫離」，且主體曾存在於該場所；使用「から」時單純表示出發點或來源。抽象用法（畢業、獨立）固定用「を」。'
}
```

### 3.2 辨析區塊撰寫原則

| 原則 | 說明 |
|------|------|
| 列出核心差異 | 每個 point 說明一個關鍵差異 |
| 提供詳細解釋 | explanation 說明「為什麼」有這個差異 |
| 正誤對照 | 每個差異都要有正確和錯誤的例句對照 |
| 提供修正版 | 若錯誤例句有正確說法，提供 correctedVersion |
| 總結歸納 | summary 簡潔總結所有差異點 |

---

## 4. 小提醒區塊（常犯錯誤）

用於提醒學習者常見的錯誤，幫助避免踩坑。

### 4.1 小提醒結構

```typescript
{
  title: '小提醒：學習者常犯錯誤',
  items: [
    {
      mistake: '錯誤類型標題（如：誤將「は」與「が」混用）',
      explanation: '詳細說明為什麼學習者容易犯這個錯誤。例如：因為中文沒有主題標記和主格標記的區分，所以華語母語者容易混淆。另外，很多教科書只說「は是主題、が是主格」，但沒有解釋實際使用時的語感差異。',
      whenToUse: '說明正確用法的使用時機。例如：當要強調「是誰做的」或描述眼前發生的事時用「が」；當說明一般性的事實或對比時用「は」。',
      correct: {
        sentence: '私{わたし}は猫{ねこ}が好{す}きです。',
        note: '○ 「私は」是主題（關於我），「猫が」是好きの對象'
      },
      incorrect: {
        sentence: '私{わたし}が猫{ねこ}は好{す}きです。',
        note: '✕ 語序混亂，文法錯誤'
      },
      additionalExamples: [
        {
          context: '回答「誰が行きますか？」時',
          correct: { sentence: '私{わたし}が行{い}きます。', note: '○ 強調「是我」去' },
          incorrect: { sentence: '私{わたし}は行{い}きます。', note: '△ 可以但沒有回答「誰」' }
        }
      ],
      memoryTip: '記憶訣竅：把「が」想成「聚光燈」，打在誰身上誰就是焦點；「は」想成「舞台背景」，設定討論的範圍。'
    },
    {
      mistake: '在形容詞句中誤用「を」',
      explanation: '因為中文說「我喜歡貓」，動詞「喜歡」後面接「貓」，所以學習者容易類推日文也用「を」。但日文的「好き」是形容詞（な形容詞），不是動詞，所以對象要用「が」而不是「を」。',
      correct: {
        sentence: 'コーヒーが好{す}きです。',
        note: '○ 好きの對象用「が」'
      },
      incorrect: {
        sentence: 'コーヒーを好{す}きです。',
        note: '✕ 好き是形容詞，不能用「を」'
      },
      relatedPatterns: ['〜がほしい', '〜ができる', '〜がわかる'],
      memoryTip: '記憶訣竅：「好き」「ほしい」「わかる」「できる」這四個詞的對象都用「が」，可以一起記。'
    }
  ]
}
```

### 4.2 小提醒撰寫原則

| 原則 | 說明 |
|------|------|
| 說明錯誤原因 | 解釋「為什麼」學習者容易犯這個錯誤（母語干擾、規則類推等） |
| 提供正確時機 | whenToUse 說明什麼情況下應該用正確的形式 |
| 正誤對照 | 每個錯誤都要有正確和錯誤的例句對照 |
| 多情境示範 | additionalExamples 提供不同情境的範例 |
| 記憶訣竅 | memoryTip 提供好記的口訣或類比 |
| 相關句型 | relatedPatterns 列出有相同規則的其他句型 |

---

## 5. 測驗題格式

### 5.1 綜合練習題（每個文法項目至少 5 題）

**重要：題目結構要求**

| 題號 | 類型 | 說明 |
|------|------|------|
| 第 1-3 題 | 基礎填空 | 單句填空，測試基本用法理解 |
| 第 4 題 | **兩人長對話** | 對話情境，至少 2 個來回 |
| 第 5 題 | **兩人長對話** | 不同情境的對話，測試實際應用能力 |

```typescript
// 第 1-3 題：基礎填空
{
  id: 'n4_quiz_ga_01',
  type: 'inline_quiz',
  grammarPoint: '〜が',
  sentence: 'あっ、見{み}て！鳥{とり}（　）空{そら}を飛{と}んでいるよ。',
  options: ['は', 'が', 'に', 'で'],
  correctIndex: 1,
  explanation: {
    correct: '「が」正確！描述眼前看到的自然現象時，用「が」標記主體。這裡是在說「看！有鳥在飛」，強調當下正在發生的事情，主語用「が」。',
    wrong: [
      '「は」錯誤：「は」是主題標記，用於已知資訊或對比。這裡是眼前突然看到的新事物，不適合用「は」。',
      '「に」錯誤：「に」表示存在的地點或動作的目標，這裡需要標記主語，不是表示方向或地點。',
      '「で」錯誤：「で」表示動作發生的場所或手段，這裡需要標記主語，不是表示場所。'
    ]
  }
},
{
  id: 'n4_quiz_ga_02',
  type: 'inline_quiz',
  grammarPoint: '〜が',
  sentence: '雨{あめ}（　）降{ふ}ってきましたね。',
  options: ['は', 'が', 'に', 'で'],
  correctIndex: 1,
  explanation: {
    correct: '「が」正確！描述天氣變化等自然現象時，用「が」。「〜てきました」表示變化的開始，強調雨「開始下了」這個新發生的事實。',
    wrong: [
      '「は」錯誤：「は」用於主題或對比。描述自然現象的發生時，應該用「が」來標記主體，而非「は」。',
      '「に」錯誤：「に」表示時間、地點或對象，這裡需要標記自然現象的主體「雨」，不適用。',
      '「で」錯誤：「で」表示場所或手段，這裡「雨」是動作的主體，不是場所或工具。'
    ]
  }
},
{
  id: 'n4_quiz_ga_03',
  type: 'inline_quiz',
  grammarPoint: '〜が',
  sentence: '私{わたし}は日本語{にほんご}（　）少{すこ}しできます。',
  options: ['は', 'が', 'を', 'に'],
  correctIndex: 1,
  explanation: {
    correct: '「が」正確！「できる」表示能力時，對象用「が」標記。「日本語ができる」是固定搭配，這是必須記住的用法。',
    wrong: [
      '「は」錯誤：雖然「は」可用於強調對比（如「日本語は少しできます」表示「日語的話會一點」），但這裡沒有對比語境，標準用法是「が」。',
      '「を」錯誤：「できる」不是他動詞，不能用「を」。這是華語母語者常犯的錯誤，因為中文說「會日語」像是動詞接賓語。',
      '「に」錯誤：「に」表示對象或方向，但「できる」的能力對象必須用「が」，這是固定搭配。'
    ]
  }
},

// 第 4 題：兩人長對話（必要）
{
  id: 'n4_quiz_ga_04',
  type: 'inline_quiz',
  grammarPoint: '〜が',
  sentence: '「ねえ、あの人{ひと}、誰{だれ}か知{し}ってる？」\n「ああ、あの人{ひと}（　）新{あたら}しく入{はい}った田中{たなか}さんだよ。昨日{きのう}から営業部{えいぎょうぶ}に配属{はいぞく}されたんだって。」\n「へえ、そうなんだ。今度{こんど}挨拶{あいさつ}しなきゃ。」',
  options: ['は', 'が', 'を', 'に'],
  correctIndex: 1,
  explanation: {
    correct: '「が」正確！回答「誰？」的問題時，用「が」來標記答案（新資訊）。「あの人が田中さんだ」強調「那個人就是田中」，將焦點放在「那個人」身上。',
    wrong: [
      '「は」錯誤：「は」用於主題，但這裡是回答「誰？」的問題，需要用「が」來標記新資訊。用「は」會變成「那個人（作為主題）是田中」，語感不自然。',
      '「を」錯誤：「を」用於他動詞的受詞，這裡是「AがBだ」的句型，表示「A是B」，不需要受詞標記。',
      '「に」錯誤：「に」表示對象或方向，這裡是判斷句「AがBだ」，不適用「に」。'
    ]
  }
},

// 第 5 題：兩人長對話（必要）
{
  id: 'n4_quiz_ga_05',
  type: 'inline_quiz',
  grammarPoint: '〜が',
  sentence: '「今日{きょう}のお昼{ひる}、何{なに}（　）食{た}べたい？カレーとラーメン、どっちがいい？」\n「うーん、今日{きょう}は暑{あつ}いから、冷{つめ}たいもの（　）いいな。冷{ひ}やし中華{ちゅうか}とかある？」\n「あ、いいね！じゃあ、駅前{えきまえ}の中華屋{ちゅうかや}さんに行{い}こうか。」',
  options: ['が/が', 'を/が', 'が/は', 'を/を'],
  correctIndex: 0,
  explanation: {
    correct: '「が/が」正確！第一空：「何が食べたい？」希望的對象用「が」，「〜たい」的對象標記用「が」。第二空：「冷たいものがいい」選擇・希望的對象也用「が」，「〜がいい」是固定用法。',
    wrong: [
      '「を/が」錯誤：第一空「何を」雖然文法上可以接受（他動詞的對象），但「〜たい」表達希望時，對象通常用「が」更自然。第二空正確。',
      '「が/は」錯誤：第一空正確，但第二空「冷たいものは」會變成對比語感（冷的東西的話...），與「いい」搭配不自然。「〜がいい」是固定表達。',
      '「を/を」錯誤：兩個空都錯。「〜たい」的對象用「が」更自然，「いい」的對象必須用「が」，不能用「を」。'
    ]
  }
}
```

### 5.2 題目多樣性設計原則（重要！）

**問題：** 若該文法是「で」，而所有題目的正確答案都是「で」，學習者可以無腦選擇該助詞就得分，無法真正測試理解程度。

**解決方案：** 每組 5 題測驗必須包含以下多樣性設計：

#### 5.2.1 題目類型配置（必須遵守）

| 題號 | 類型 | 正確答案 | 說明 |
|------|------|----------|------|
| 第 1 題 | 正向題 | 該文法本身 | 基礎用法確認 |
| 第 2 題 | 正向題 | 該文法本身 | 不同用法確認 |
| 第 3 題 | **陷阱題** | **其他助詞/文法** | 該文法不適用的情境 |
| 第 4 題 | 對話題 | 該文法本身 | 實際應用 |
| 第 5 題 | **辨析題** | **視情境而定** | 易混淆文法的比較 |

#### 5.2.2 陷阱題設計原則（第 3 題）

陷阱題的目的是測試學習者是否**真正理解**文法的使用限制，而非機械記憶。

**設計方法：**
1. 創造一個「看起來應該用該文法，但實際上不適用」的情境
2. 正確答案是**其他助詞或文法**
3. 該文法作為**錯誤選項**出現，並在解說中說明為什麼不能用

**範例（「で」助詞的陷阱題）：**

```typescript
// 第 3 題：陷阱題 - 正確答案不是「で」
{
  id: 'n5_q_de_trap_01',
  sentence: '私{わたし}は毎朝{まいあさ}6時{じ}（　）起{お}きます。',
  options: ['で', 'に', 'を', 'が'],
  correctIndex: 1,  // 正確答案是「に」不是「で」
  explanation: {
    correct: '「に」正確！表示時間點用「に」。「6時に起きる」是固定用法。',
    wrong: [
      '「で」錯誤：「で」表示場所或手段，不能用於時間點。「6時で」是錯誤的。',
      '「を」錯誤：「を」用於他動詞的受詞，這裡不適用。',
      '「が」錯誤：「が」用於主語標記，這裡不適用。'
    ]
  }
}
```

**更多陷阱題範例：**

| 學習文法 | 陷阱情境 | 正確答案 | 陷阱說明 |
|----------|----------|----------|----------|
| 「で」場所 | 存在的場所 | 「に」 | 「に」用於存在，「で」用於動作 |
| 「に」方向 | 動作場所 | 「で」 | 「で」用於動作發生的場所 |
| 「を」受詞 | 移動路徑 | 「を」或「に」 | 視動詞而定 |
| 「が」主語 | 對比語境 | 「は」 | 對比時用「は」 |

#### 5.2.3 辨析題設計原則（第 5 題）

辨析題測試學習者區分**相似但不同**的文法。

**設計方法：**
1. 創造一個「該文法和另一個文法都可能適用」的情境
2. 根據語境細節決定正確答案
3. 解說要說明兩者的差異

**範例（「で」vs「に」的辨析）：**

```typescript
// 第 5 題：辨析題
{
  id: 'n5_q_de_vs_ni_01',
  sentence: '「どこで勉強{べんきょう}しますか。」\n「図書館{としょかん}（　）勉強{べんきょう}します。」',
  options: ['で', 'に', 'を', 'が'],
  correctIndex: 0,  // 「で」正確，因為是動作場所
  explanation: {
    correct: '「で」正確！「勉強する」是動作，所以場所用「で」標記。',
    wrong: [
      '「に」錯誤：「に」用於存在場所（いる/ある）或移動目的地，不用於動作場所。',
      '「を」錯誤：這裡需要場所標記，不是受詞標記。',
      '「が」錯誤：這裡需要場所標記，不是主語標記。'
    ]
  }
}
```

#### 5.2.4 常犯錯誤整合

每道題的 `explanation.wrong` 陣列必須針對該選項說明：
1. **為什麼錯** - 具體說明該選項在此情境的問題
2. **正確用法** - 說明該選項的正確使用場景
3. **易混淆點** - 指出學習者為什麼會選錯

---

### 5.3 選項設計原則

| 類型 | 說明 | 範例 |
|------|------|------|
| 正確答案 | 符合文法規則與語境 | 「が」（描述眼前現象） |
| 常見錯誤 | 學習者容易混淆的選項 | 「は」（主題標記，但這裡需要的是焦點標記） |
| 相似助詞 | 形式相近但用法不同 | 「に」vs「で」（場所助詞） |
| 干擾選項 | 完全不適用但初學者可能誤選 | 「の」（連體助詞，這裡不適用） |

### 5.4 對話題設計原則

| 原則 | 說明 |
|------|------|
| 情境真實 | 使用日常生活中常見的對話場景（職場、朋友、家庭等） |
| 長度適中 | 至少 2-3 個來回，但不超過 5 個來回 |
| 上下文完整 | 對話要有足夠的背景資訊，讓學習者理解語境 |
| 自然語氣 | 使用口語表達（「〜んだ」「〜よ」「〜ね」等終助詞） |
| 難度漸進 | 第 4 題難度中等，第 5 題可稍難（如複合空格） |

---

## 6. 完整文法項目範例

### 6.1 〜が（主體助詞）- 完整範例

```typescript
// Unit 01: 助詞 I - 01. 〜が
{
  id: 'n4_grammar_ga',
  pattern: '〜が',
  connection: '名詞＋が',
  translation: '中文以語序位置決定「主體」，無翻譯。',
  level: 'N4',
  explanation: [
    {
      usageId: 1,
      title: '動作的主體',
      description: '用於單純描述說話者看到「第三人稱的某人做某動作（描述人）」。後句會使用動詞。當說話者目睹或報告某件事情發生時，主語使用「が」來標記，帶有「現場目擊」或「新資訊」的語感。',
      examples: [
        // 第 1 句：基礎單句
        { japanese: '赤{あか}ちゃんが泣{な}いている。', chinese: '小孩在哭泣。', grammarRef: '「〜ている」⇒ #41-①' },
        // 第 2 句：基礎單句（不同情境）
        { japanese: '友達{ともだち}が来{き}ました。', chinese: '朋友來了。' },
        // 第 3 句：兩人長對話（必要）
        {
          japanese: '「あっ、見{み}て！あそこで誰{だれ}かが倒{たお}れてる！」\n「えっ、本当{ほんとう}だ！大丈夫{だいじょうぶ}かな。ちょっと見{み}に行{い}こう。」\n「うん、急{いそ}ごう！救急車{きゅうきゅうしゃ}を呼{よ}んだ方{ほう}がいいかも。」',
          chinese: '「啊，你看！那邊有人倒下了！」\n「咦，真的耶！不知道有沒有事。我們去看一下吧。」\n「嗯，快走！可能要叫救護車比較好。」',
          note: '緊急情境的對話，展示「が」標記眼前發生的事'
        },
        // 第 4 句：諺語（選填）
        {
          japanese: '「犬{いぬ}も歩{ある}けば棒{ぼう}に当{あ}たる。」',
          chinese: '「狗走路也會撞到棍子。」（意指：多做事就會有收穫，或也可能遇到災難。）',
          note: '諺語：使用「が」標記主語'
        }
      ]
    },
    {
      usageId: 2,
      title: '事物、自然現象的主體',
      description: '用於單純描述說話者看到或感覺到「某一個自然現象、或某事物的狀況（描述事物）」。後句可使用動詞以及形容詞。此用法常見於描述天氣、自然景觀、機器運作等非人類主體的狀態或變化。',
      examples: [
        // 第 1 句
        { japanese: '雨{あめ}が降{ふ}っています。', chinese: '正在下雨。' },
        // 第 2 句
        { japanese: '月{つき}が出{で}ました。', chinese: '月亮出來了。' },
        // 第 3 句：兩人長對話（必要）
        {
          japanese: '「わあ、今日{きょう}の夕焼{ゆうや}け、すごくきれいだね！空{そら}がオレンジ色{いろ}に染{そ}まってる。」\n「本当{ほんとう}だ！雲{くも}もピンク色{いろ}になってるよ。写真{しゃしん}撮{と}ろうかな。」\n「うん、撮{と}って撮{と}って！SNSに上{あ}げようよ。」',
          chinese: '「哇，今天的晚霞好漂亮喔！天空染成橘色了。」\n「真的耶！雲也變成粉紅色了。要不要拍照呢。」\n「嗯，拍拍拍！上傳到社群吧。」',
          note: '描述自然現象的對話'
        },
        // 第 4 句：詩句或名言（選填）
        {
          japanese: '「花{はな}が咲{さ}き、鳥{とり}が歌{うた}う。」',
          chinese: '「花開鳥鳴。」（春天的美景描寫。）',
          note: '文學表現：連續使用「が」描述多個自然現象'
        }
      ]
    }
  ],
  // 相似文法差異
  analysis: {
    title: '「は」與「が」的使用時機',
    description: '「は」和「が」是日語學習者最容易混淆的助詞。「は」標記話題（舊資訊），「が」標記焦點（新資訊）。動詞句第一、二人稱時，動作的主體一般會使用「は」。若使用「が」，則語感上帶有弦外之音，用來強調「正是我…／由我來…」的含義。',
    points: [
      {
        rule: '描述眼前正在發生的事情時，用「が」（新資訊焦點）',
        explanation: '當說話者注意到某件事正在發生，並想要告訴對方時，主語用「が」標記。這時候「が」帶有「看！就是這個！」的語感。',
        examples: [
          { japanese: 'あっ、バスが来{き}た！', chinese: '啊，公車來了！', note: '○ 眼前發生的事' },
          { japanese: 'バスは来{き}た。', chinese: '公車（我知道的那班）來了。', note: '△ 語感變成已知資訊的確認' }
        ]
      },
      {
        rule: '回答「誰が〜？」「何が〜？」的問題時，答案用「が」',
        explanation: '因為問句問的是「誰/什麼」，答案就是新資訊，所以要用「が」標記。',
        examples: [
          { japanese: '「誰{だれ}が来{き}ましたか？」\n「田中{たなか}さんが来{き}ました。」', chinese: '「誰來了？」\n「田中先生來了。」', note: '○ 回答問句的焦點' }
        ]
      },
      {
        rule: '強調「正是我／由我來」時，用「が」',
        explanation: '當說話者想要強調自己是動作的執行者，或自願承擔某件事時，用「が」。',
        examples: [
          { japanese: 'この仕事{しごと}は、私{わたし}がやります。', chinese: '這個工作，由我來做。', note: '○ 強調自願承擔' },
          { japanese: 'この仕事{しごと}は、私{わたし}はやります。', chinese: '這個工作，我（跟別人比）會做。', note: '△ 對比語感' }
        ]
      }
    ],
    additionalNote: '「〜が」除了在上述用法中用於表「主體」外，亦可用來表達感情、能力的「對象」（如：猫が好き、日本語ができる）以及主語的「屬性」（如：象は鼻が長い）。'
  },
  // 小提醒：常犯錯誤
  tips: {
    title: '小提醒：學習者常犯錯誤',
    items: [
      {
        mistake: '在「好き・ほしい・できる・わかる」句型中誤用「を」',
        explanation: '因為中文說「喜歡貓」「想要錢」「會日文」「懂數學」，動詞後面直接接對象，所以華語母語者容易類推日文也用「を」。但這些詞在日文中，對象要用「が」標記。',
        whenToUse: '表達喜好、願望、能力、理解時，對象用「が」。',
        correct: { sentence: '猫{ねこ}が好{す}きです。', note: '○ 「好き」的對象用「が」' },
        incorrect: { sentence: '猫{ねこ}を好{す}きです。', note: '✕ 「好き」是な形容詞，不是動詞' },
        relatedPatterns: ['〜がほしい', '〜ができる', '〜がわかる', '〜が上手'],
        memoryTip: '記憶訣竅：「好き」「ほしい」「わかる」「できる」是「が四天王」，對象都用「が」！'
      },
      {
        mistake: '所有句子的主語都用「は」',
        explanation: '很多教科書一開始教「私は〜」的句型，讓學習者以為主語都要用「は」。但「は」是主題標記，不是主格標記。描述眼前發生的事、回答問句、強調焦點時，要用「が」。',
        whenToUse: '描述眼前發生的事情、回答「誰が/何が」的問題、強調主體時，用「が」。',
        correct: { sentence: 'あっ、電車{でんしゃ}が来{き}た！', note: '○ 眼前發生的事用「が」' },
        incorrect: { sentence: 'あっ、電車{でんしゃ}は来{き}た！', note: '△ 語感變成「（我知道的那班）電車來了」' },
        memoryTip: '記憶訣竅：「が」是聚光燈，打在誰身上誰就是焦點；「は」是舞台，設定討論的範圍。'
      }
    ]
  },
  // 綜合練習題：至少 5 題
  quiz: [
    // 第 1 題：基礎填空
    {
      id: 'n4_quiz_ga_01',
      sentence: 'あっ、見{み}て！鳥{とり}（　）空{そら}を飛{と}んでいるよ。',
      options: ['は', 'が', 'に', 'で'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！描述眼前看到的自然現象時，用「が」標記主體。「鳥が飛んでいる」強調當下正在發生的事情。',
        wrong: [
          '「は」錯誤：「は」用於已知資訊或對比，這裡是眼前突然看到的新事物，應用「が」。',
          '「に」錯誤：「に」表示存在地點或動作目標，這裡需要標記主語，不適用。',
          '「で」錯誤：「で」表示動作發生的場所或手段，這裡需要標記主語。'
        ]
      }
    },
    // 第 2 題：基礎填空
    {
      id: 'n4_quiz_ga_02',
      sentence: 'あれ？雨{あめ}（　）降{ふ}ってきましたね。',
      options: ['は', 'が', 'に', 'で'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！描述天氣變化等自然現象時，用「が」。「〜てきました」表示變化剛開始發生。',
        wrong: [
          '「は」錯誤：描述自然現象的發生時，應該用「が」來標記主體，而非「は」。',
          '「に」錯誤：「に」表示時間或地點，這裡需要標記自然現象的主體「雨」。',
          '「で」錯誤：「で」表示場所或手段，這裡「雨」是動作的主體，不是場所。'
        ]
      }
    },
    // 第 3 題：基礎填空
    {
      id: 'n4_quiz_ga_03',
      sentence: '私{わたし}は日本語{にほんご}（　）少{すこ}しできます。',
      options: ['は', 'が', 'を', 'に'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！「できる」的對象用「が」。「日本語ができる」是固定搭配，必須記住。',
        wrong: [
          '「は」錯誤：雖然「は」可用於對比，但標準用法是「が」。',
          '「を」錯誤：「できる」不是他動詞，不能用「を」。這是華語母語者常犯的錯誤。',
          '「に」錯誤：「できる」的能力對象必須用「が」，不能用「に」。'
        ]
      }
    },
    // 第 4 題：兩人長對話（必要）
    {
      id: 'n4_quiz_ga_04',
      sentence: '「ねえ、あの人{ひと}、誰{だれ}か知{し}ってる？最近{さいきん}よく見{み}かけるんだけど。」\n「ああ、あの人{ひと}（　）新{あたら}しく入{はい}った田中{たなか}さんだよ。先週{せんしゅう}から営業部{えいぎょうぶ}に配属{はいぞく}されたんだって。すごく仕事{しごと}ができるって評判{ひょうばん}だよ。」\n「へえ、そうなんだ。今度{こんど}挨拶{あいさつ}してみようかな。」',
      options: ['は', 'が', 'を', 'に'],
      correctIndex: 1,
      explanation: {
        correct: '「が」正確！回答「誰？」的問題時，用「が」來標記答案（新資訊）。「あの人が田中さんだ」＝「那個人就是田中」。',
        wrong: [
          '「は」錯誤：這裡是回答「誰？」的問題，需要用「が」標記新資訊，而非主題標記「は」。',
          '「を」錯誤：這是判斷句「AがBだ」，不需要受詞標記「を」。',
          '「に」錯誤：判斷句「AがBだ」不適用「に」，這裡不是表示方向或對象。'
        ]
      }
    },
    // 第 5 題：兩人長對話（必要）
    {
      id: 'n4_quiz_ga_05',
      sentence: '「今日{きょう}のお昼{ひる}、何{なに}（　）食{た}べたい？この辺{へん}、ラーメン屋{や}とカレー屋{や}があるけど。」\n「うーん、今日{きょう}は暑{あつ}いから、冷{つめ}たいもの（　）いいな。冷{ひ}やし中華{ちゅうか}とかある？」\n「あ、いいね！じゃあ、駅前{えきまえ}の中華屋{ちゅうかや}さんに行{い}こう。あそこの冷{ひ}やし中華{ちゅうか}、すごくおいしいよ。」',
      options: ['が/が', 'を/が', 'が/は', 'を/を'],
      correctIndex: 0,
      explanation: {
        correct: '「が/が」正確！第一空：「何が食べたい？」希望的對象用「が」。第二空：「冷たいものがいい」選擇的對象也用「が」。',
        wrong: [
          '「を/が」錯誤：第一空「何を」雖然文法可接受，但「〜たい」的對象用「が」更自然。',
          '「が/は」錯誤：第二空「冷たいものは」會變成對比語感，「〜がいい」是固定表達。',
          '「を/を」錯誤：「〜たい」的對象用「が」更自然，「いい」的對象必須用「が」。'
        ]
      }
    }
  ]
}
```

---

## 7. 執行流程

| 步驟 | 動作 | 說明 |
|------|------|------|
| 1 | 確認範圍 | 確認要生成的 JLPT 級別與文法項目 |
| 2 | 查閱資料 | 參考文法書確認接續、翻譯、用法 |
| 3 | 撰寫說明 | 每個用法 3-6 個例句，含振假名與翻譯 |
| 4 | 編寫辨析 | 比較相似文法差異，提供正誤例句 |
| 5 | 出題 | 隨堂測驗 5 題 ，難度漸漸提升，第4及第5題須為兩人或多人對話 |
| 6 | 驗證 | TypeScript 類型檢查 |
| 7 | 檢查 | 確認例句自然、選項合理 |

---

## 8. JSON Schema（供程式使用）

```typescript
interface GrammarPoint {
  id: string;
  pattern: string;
  connection: string;
  translation: string;
  level: 'N5' | 'N4' | 'N3' | 'N2' | 'N1';
  explanation: GrammarUsage[];
  analysis?: GrammarAnalysis;
  quiz: QuizQuestion[];
}

interface GrammarUsage {
  usageId: number;
  title: string;
  description: string;
  examples: GrammarExample[];
}

interface GrammarExample {
  japanese: string;      // 漢字用 {假名} 標註
  chinese: string;
  note?: string;
  grammarRef?: string;   // 相關文法參照
}

interface GrammarAnalysis {
  title: string;
  description: string;
  points?: AnalysisPoint[];
  examples?: GrammarExample[];
  additionalNote?: string;
}

interface AnalysisPoint {
  rule: string;
  example?: GrammarExample;
  examples?: GrammarExample[];
}

interface QuizQuestion {
  id: string;
  sentence: string;      // 空格用（　）表示
  options: string[];     // 4 個選項
  correctIndex: number;  // 0-3
  explanation: {
    correct: string;     // 正確選項的詳細解說
    wrong: string[];     // 各錯誤選項的詳細解說（依序對應 options 中的錯誤選項）
  };
  grammarRef?: string;
}
```

---

## 9. 生成指令範例

### 生成單一文法項目
```
請生成 N4 文法「〜に」的完整內容，包含：
- 接續方式、翻譯
- 3 個用法分類，每個用法至少 4 個例句
- 辨析（與「〜で」比較）
- 2 題隨堂測驗
```

### 生成完整單元
```
請生成 N4 第 01 單元「助詞 I」的完整內容：
- 5 個文法項目（〜が、〜を、〜に、〜で、〜へ）
- 每個文法的例句與辨析
- 隨堂測驗（每項 2 題）
- 單元小測驗（10 題）
- 輸出格式：TypeScript
```

### 生成測驗題組
```
根據以下 N4 助詞生成 20 題選擇題：
が、を、に、で、へ、は、と、から、まで、の
要求：混合不同用法，選項設計包含常見錯誤
```
