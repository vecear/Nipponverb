/**
 * Second cleanup pass: Remove remaining wrong furigana from Chinese context
 * words in datesPractice explanation fields.
 *
 * Also fixes leftover Japanese grammar particles (は、の、から、才).
 *
 * Usage: node scripts/cleanDatesPass2.mjs
 */
import { readFileSync, writeFileSync, readdirSync } from 'fs'
import { resolve, dirname } from 'path'
import { fileURLToPath } from 'url'

const __dirname = dirname(fileURLToPath(import.meta.url))
const root = resolve(__dirname, '..')

// ─── Additional Chinese context words with wrong furigana ───
const MORE_REPLACEMENTS = [
  // Common Chinese words missed in pass 1
  ['錯誤{さくご}', '錯誤'],
  ['缺少{けっしょう}', '缺少'],
  ['不完整{ふかんせい}', '不完整'],
  ['套用{とうよう}', '套用'],
  ['少數{しょうすう}', '少數'],
  ['最{もっと}', '最'],
  ['等詞{とうし}', '等詞'],
  ['有兩個{りょうこ}', '有兩個'],
  ['由於{ゆえ}', '由於'],
  ['同音{どうおん}', '同音'],
  ['測試{そくし}', '測試'],
  ['了解{りょうかい}', '了解'],
  ['文化{ぶんか}', '文化'],
  ['更常用{こうじょうよう}', '更常用'],
  ['兩種{りょうしゅ}', '兩種'],
  ['知道{しって}', '知道'],
  ['是否{ぜひ}', '是否'],
  ['會被{かいひ}', '會被'],
  ['接近{せっきん}', '接近'],
  ['不出現{ふしゅつげん}', '不出現'],
  ['特別{とくべつ}', '特別'],
  ['三重{さんじゅう}', '三重'],
  ['答案{とうあん}', '答案'],
  ['獨特{どくとく}', '獨特'],
  ['相對{そうたい}', '相對'],
  ['變化{へんか}', '變化'],
  ['沒有特殊變化{へんか}', '沒有特殊變化'],
  ['外來語{がいらいご}', '外來語'],
  ['意思{いみ}', '意思'],
  ['有時{ときどき}', '有時'],
  ['口語{こうご}', '口語'],
  ['會說{かいう}', '會說'],
  ['無{なし}', '無'],
  ['不正確{ふせいかく}', '不正確'],
  ['有兩種{りょうしゅ}', '有兩種'],
  ['來自{らいじ}', '來自'],
  ['英語{えいご}', '英語'],
  ['傳統{でんとう}', '傳統'],
  ['兩者{りょうしゃ}', '兩者'],
  ['都{すべて}', '都'],
  ['溫度{おんど}', '溫度'],
  ['零度{れいど}', '零度'],
  ['可以{かのう}', '可以'],
  ['理解{りかい}', '理解'],
  ['通常{つうじょう}', '通常'],
  ['不獨立{ふどくりつ}', '不獨立'],
  ['陸地{りくち}', '陸地'],
  ['應{おう}', '應'],
  ['掌握{しょうあく}', '掌握'],
  ['為{ため}', '為'],
  ['避免{ひめん}', '避免'],
  ['聽起來{ききおこり}', '聽起來'],
  ['使用習慣{しゅうかん}', '使用習慣'],
  ['習慣{しゅうかん}', '習慣'],
  ['用法{ようほう}', '用法'],
  ['位置{いち}', '位置'],
  ['諧音{かいおん}', '諧音'],
  ['變成{へんせい}', '變成'],
  ['要變成{へんせい}', '要變成'],
  ['引發{いんはつ}', '引發'],
  ['引發{いんぱつ}', '引發'],
  ['後{あと}', '後'],
  ['學習者容易忽略{こりゃく}', '學習者容易忽略'],
  ['直接{ちょくせつ}', '直接'],
  ['不加{ふか}', '不加'],
  ['說{いう}', '說'],
  ['金額{きんがく}', '金額'],
  ['省略{しょうりゃく}', '省略'],
  ['不變{ふへん}', '不變'],
  ['且應{おう}', '且應'],
  ['不是只有{だけ}', '不是只有'],
  ['多用{おおくもちい}', '多用'],
  ['生活{せいかつ}', '生活'],
  ['某些{ぼうしゅ}', '某些'],
  ['用法{ようほう}', '用法'],
  ['中仍{なお}', '中仍'],
  ['紙幣{しへい}', '紙幣'],
  ['學習者會以為{おもい}', '學習者會以為'],
  ['一樣{いちよう}', '一樣'],
  ['不可以{ふかのう}', '不可以'],
  ['不可省略{しょうりゃく}', '不可省略'],
  ['且省略{しょうりゃく}', '且省略'],
  ['不省略{しょうりゃく}', '不省略'],
  ['那樣{ように}', '那樣'],
  ['碁盤{ごばん}', '碁盤'],
  ['不會{ふかい}', '不會'],
  ['相反{そうはん}', '相反'],
  ['過度{かど}', '過度'],
  ['不要{ふよう}', '不要'],
  ['任何{にんい}', '任何'],
  ['任何{いかなる}', '任何'],
  ['都要{とも}', '都要'],
  ['都{とも}', '都'],
  ['年數{ねんすう}', '年數'],
  ['距離{きょり}', '距離'],
  ['單位{たんい}', '單位'],
  ['在這裡{ここ}', '在這裡'],
  ['這裡{ここ}', '這裡'],
  ['複合{ふくごう}', '複合'],
  ['兩次{にかい}', '兩次'],
  ['高難度{こうなんど}', '高難度'],
  ['典型{てんけい}', '典型'],
  ['實際上{じっさいじょう}', '實際上'],
  ['學習者容易過度{かど}', '學習者容易過度'],
  ['適用{てきよう}', '適用'],
  ['只有{ただ}', '只有'],
  ['只有{だけ}', '只有'],
  ['確認{かくにん}', '確認'],
  ['日數{にっすう}', '日數'],
  ['總複習{そうふくしゅう}', '總複習'],
  ['題{だい}', '題'],
  ['仍{なお}', '仍'],
  ['即使{たとえ}', '即使'],
  ['萬位數{まんいすう}', '萬位數'],
  ['千位數{せんいすう}', '千位數'],
  ['百位數{ひゃくいすう}', '百位數'],
  ['十位數{じゅういすう}', '十位數'],
  ['十位{じゅうい}', '十位'],
  ['整十數{せいじゅうすう}', '整十數'],
  ['整十{せいじゅう}', '整十'],
  ['不正確答案{こたえ}', '不正確答案'],
  ['正確答案{こたえ}', '正確答案'],
  ['不是正確答案{こたえ}', '不是正確答案'],
  ['乘以{じょうい}', '乘以'],
  ['象徵{しょうちょう}', '象徵'],
  ['成年{せいねん}', '成年'],
  ['重要年齡{ねんれい}', '重要年齡'],
  ['年齡{ねんれい}', '年齡'],
  ['詞彙{しい}', '詞彙'],
  ['代表{だいひょう}', '代表'],
  ['成人{せいじん}', '成人'],
  ['意義{いぎ}', '意義'],
  ['現代多用{おおくもちい}', '現代多用'],
  ['日常多用{おおくもちい}', '日常多用'],
  ['避諱多用{おおくもちい}', '避諱多用'],
  ['混淆多用{おおくもちい}', '混淆多用'],
  ['日期多用{おおくもちい}', '日期多用'],
  ['日期也多用{おおくもちい}', '日期也多用'],
  ['應用{おうよう}', '應用'],
  ['語法{ごほう}', '語法'],
  ['不使用{ふしよう}', '不使用'],
  ['保留了{た}', '保留了'],
  ['避諱習慣{しゅうかん}', '避諱習慣'],
  ['日常習慣{しゅうかん}', '日常習慣'],
  ['混淆習慣{しゅうかん}', '混淆習慣'],
  ['讀法選擇{せんたく}', '讀法選擇'],
  ['開始{はじめ}', '開始'],
  ['開始{かいし}', '開始'],
  ['的最後{さいご}', '的最後'],
  ['最後{さいご}', '最後'],
  ['結束{おわり}', '結束'],
  ['結束{しゅうりょう}', '結束'],
  ['慣用{かんよう}', '慣用'],
  ['而非{もはや}', '而非'],
  ['而非{いがい}', '而非'],
  ['頁數{ページ}', '頁數'],
  ['分數{ぶんすう}', '分數'],
  ['加{か}', '加'],
  ['少了{すくな}', '少了'],
  ['讀法錯誤{ごさつ}', '讀法錯誤'],
  ['組合讀法錯誤{さくご}', '組合讀法錯誤'],
  ['前{まえ}', '前'],
  ['問句{もんく}', '問句'],
  ['時{じ}', '時'],
  ['源於{げんい}', '源於'],
  ['時間長度{ながさ}', '時間長度'],
  ['意思{いし}', '意思'],
  ['的意思{いし}', '的意思'],
  ['系列{けいれつ}', '系列'],
  ['古日語{こにほんご}', '古日語'],
  ['意指{いし}', '意指'],
  ['新月{しんげつ}', '新月'],
  ['出現{しゅつげん}', '出現'],
  ['月份開始{かいし}', '月份開始'],
  ['日期的訓讀傳統{でんとう}', '日期的訓讀傳統'],
  ['語源{ごげん}', '語源'],
  ['學年{がくねん}', '學年'],
  ['新學年{しんがくねん}', '新學年'],
  ['制度{せいど}', '制度'],
  ['今天{きょう}', '今天'],
  ['以後{いご}', '以後'],
  ['間{かん}', '間'],
  ['表示兩天{ふつか}', '表示兩天'],
  ['前後{ぜんご}', '前後'],
  ['時期{じき}', '時期'],
  ['節日{せつじつ}', '節日'],
  ['促音的重要性{じゅうようせい}', '促音的重要性'],
  ['的重要性{じゅうようせい}', '的重要性'],
  ['天數{にっすう}', '天數'],
  ['表示三天{さんにち}', '表示三天'],
  ['休假{やすみ}', '休假'],
  ['是短音{たんおん}', '是短音'],
  ['短音{たんおん}', '短音'],
  ['是長音{ちょうおん}', '是長音'],
  ['長音{ちょうおん}', '長音'],
  ['長短音{ちょうたんおん}', '長短音'],
  ['需要長音{ちょうおん}', '需要長音'],
  ['是四天{よっか}', '是四天'],
  ['表示四天{よっか}', '表示四天'],
  ['是八天{ようか}', '是八天'],
  ['表示八天{ようか}', '表示八天'],
  ['混淆點{てん}', '混淆點'],
  ['出發{しゅっぱつ}', '出發'],
  ['問題{もんだい}', '問題'],
  ['日程{にってい}', '日程'],
  ['下週{らいしゅう}', '下週'],
  ['有會議{かいぎ}', '有會議'],
  ['會議{かいぎ}', '會議'],
  ['表示下週{らいしゅう}', '表示下週'],
  ['截止{しめきり}', '截止'],
  ['截止日{しめきりび}', '截止日'],
  ['商務{しょうむ}', '商務'],
  ['不需要{じゅようなく}', '不需要'],
  ['不需要{じゅよう}', '不需要'],
  ['需要{じゅよう}', '需要'],
  ['需要{ひつよう}', '需要'],
  ['必要{ひつよう}', '必要'],
  ['變形{へんけい}', '變形'],
  ['歸還{へんきゃく}', '歸還'],
  ['回答歸還{へんきゃく}', '回答歸還'],
  ['回答截止{しめきり}', '回答截止'],
  ['回答考試{しけん}', '回答考試'],
  ['回答出生日期時{とき}', '回答出生日期時'],
  ['回答家庭{かぞく}', '回答家庭'],
  ['回答小組{グループ}', '回答小組'],
  ['回答活動{かつどう}', '回答活動'],
  ['回答季節{きせつ}', '回答季節'],
  ['考試{しけん}', '考試'],
  ['學校{がっこう}', '學校'],
  ['行事{ぎょうじ}', '行事'],
  ['發薪日{きゅうりょうび}', '發薪日'],
  ['尾綴{びてつ}', '尾綴'],
  ['送巧克力{チョコ}', '送巧克力'],
  ['女性{じょせい}', '女性'],
  ['給男性{だんせい}', '給男性'],
  ['完全獨特{どくとく}', '完全獨特'],
  ['完全脫離{だつり}', '完全脫離'],
  ['毫無{ごうむ}', '毫無'],
  ['關係{かんけい}', '關係'],
  ['無關{むかん}', '無關'],
  ['同樣{どうよう}', '同樣'],
  ['地{ち}', '地'],
  ['背誦{はいしょう}', '背誦'],
  ['結婚{けっこん}', '結婚'],
  ['紀念日{きねんび}', '紀念日'],
  ['除{のぞく}', '除'],
  ['外{ほか}', '外'],
  ['慶祝{けいしゅく}', '慶祝'],
  ['兒童{じどう}', '兒童'],
  ['成長{せいちょう}', '成長'],
  ['月末{げつまつ}', '月末'],
  ['年末{ねんまつ}', '年末'],
  ['月亮{つきあかり}', '月亮'],
  ['月亮{つき}', '月亮'],
  ['一號{いちごう}', '一號'],
  ['第一{だいいち}', '第一'],
  ['個月份{こげっぷん}', '個月份'],
  ['雖然為了避諱{ためひき}', '雖然為了避諱'],
  ['嚴格{げんかく}', '嚴格'],
  ['遵守{じゅんしゅ}', '遵守'],
  ['要遵守{じゅんしゅ}', '要遵守'],
  ['強制性{きょうせいせい}', '強制性'],
  ['盛開{せいかい}', '盛開'],
  ['太短{たたん}', '太短'],
  ['什麼{なに}', '什麼'],
  ['什麼{なにを}', '什麼'],
  ['時候{じこう}', '時候'],
  ['對話{たいわ}', '對話'],
  ['但仍然{なお}', '但仍然'],
  ['仍然{なお}', '仍然'],
  ['雖然為了避免{ためひめん}', '雖然為了避免'],
  ['基數詞{きすうし}', '基數詞'],
  ['一致性{いっちせい}', '一致性'],
  ['時間時{とき}', '時間時'],
  ['無論{むろん}', '無論'],
  ['季節{きせつ}', '季節'],
  ['最短{さいたん}', '最短'],
  ['中{なか}', '中'],
  ['中最短{さいたん}', '中最短'],
  ['畢業{そつぎょう}', '畢業'],
  ['初{はじめ}', '初'],
  ['初{はじ}', '初'],
  ['梅雨{つゆ}', '梅雨'],
  ['雨水{あまみず}', '雨水'],
  ['最多{さいた}', '最多'],
  ['最熱{さいねつ}', '最熱'],
  ['氣候{きこう}', '氣候'],
  ['中旬{ちゅうじゅん}', '中旬'],
  ['秋天{あき}', '秋天'],
  ['國際{こくさい}', '國際'],
  ['有名{ゆうめい}', '有名'],
  ['的讀法與其他{たいた}', '的讀法與其他'],
  ['數字都{すべて}', '數字都'],
  ['必須特別{とくべつ}', '必須特別'],
  ['每月{まいつき}', '每月'],
  ['表示這個月{こんげつ}', '表示這個月'],
  ['一天{いちにち}', '一天'],
  ['那一天{いちにち}', '那一天'],
  ['號{いちごう}', '號'],
  ['小時{じかん}', '小時'],
  ['暫時{ざんじ}', '暫時'],
  ['表示在一點{いちじ}', '表示在一點'],
  ['一點{いちじ}', '一點'],
  ['時{とき}', '時'],
  ['現在{いま}', '現在'],
  ['現在{げんざい}', '現在'],
  ['注意四月{しがつ}', '注意四月'],
  ['雖然四月{しがつ}', '雖然四月'],
  ['課堂{じゅぎょう}', '課堂'],
  ['表示在四點{よじ}', '表示在四點'],
  ['四點{よじ}', '四點'],
  ['電影{えいが}', '電影'],
  ['表示從{から}', '表示從'],
  ['從{から}', '從'],
  ['很少{ほとんど}', '很少'],
  ['早上{あさ}', '早上'],
  ['表示早上{あさ}', '表示早上'],
  ['七點{しちじ}', '七點'],
  ['時間表達慣用{かんよう}', '時間表達慣用'],
  ['下班{しゅうりょう}', '下班'],
  ['回答下班{しゅうりょう}', '回答下班'],
  ['工作{しごと}', '工作'],
  ['表示在九點{くじ}', '表示在九點'],
  ['九點{くじ}', '九點'],
  ['明天{あした}', '明天'],
  ['約定{やくそく}', '約定'],
  ['下午{ごご}', '下午'],
  ['兩點{にじ}', '兩點'],
  ['午睡{ひるね}', '午睡'],
  ['表示下午{ごご}', '表示下午'],
  ['午休{ひるやすみ}', '午休'],
  ['到兩點{にじ}', '到兩點'],
  ['表示到兩點{にじ}', '表示到兩點'],
  ['為止{まで}', '為止'],
  ['點心{おやつ}', '點心'],
  ['吃{たべます}', '吃'],
  ['吃點心{おやつ}', '吃點心'],
  ['三點{さんじ}', '三點'],
  ['食{しょく}', '食'],
  ['到了{なったら}', '到了'],
  ['就吃{たべましょう}', '就吃'],
  ['等{まち}', '等'],
  ['等{まつ}', '等'],
  ['等{など}', '等'],
  ['到三點{さんじ}', '到三點'],
  ['的話{ばあい}', '的話'],
  ['每天{まいあさ}', '每天'],
  ['每天{まいにち}', '每天'],
  ['表示每天{まいにち}', '表示每天'],
  ['六點{ろくじ}', '六點'],
  ['晚餐{ばんごはん}', '晚餐'],
  ['在六點{ろくじ}', '在六點'],
  ['左右{ごろ}', '左右'],
  ['左右{くらい}', '左右'],
  ['左右{さゆう}', '左右'],
  ['表示六點{ろくじ}', '表示六點'],
  ['公司{かいしゃ}', '公司'],
  ['關門{しまります}', '關門'],
  ['表示在十點{じゅうじ}', '表示在十點'],
  ['營業{えいぎょう}', '營業'],
  ['十點{じゅうじ}', '十點'],
  ['睡覺{ねます}', '睡覺'],
  ['表示十點{じゅうじ}', '表示十點'],
  ['或午夜{ごや}', '或午夜'],
  ['午餐{ひるごはん}', '午餐'],
  ['即正午{しょうご}', '即正午'],
  ['用餐{しょくじ}', '用餐'],
  ['十二點{じゅうにじ}', '十二點'],
  ['表示三點五分{さんじごふん}', '表示三點五分'],
  ['表示距離{きょり}', '表示距離'],
  ['表示十點六分{じゅうじろっぷん}', '表示十點六分'],
  ['最常{さいじょう}', '最常'],
  ['也可{かのう}', '也可'],
  ['也可接受{うけいれ}', '也可接受'],
  ['特殊案例{あんれい}', '特殊案例'],
  ['兩種{ふたしゅ}', '兩種'],
  ['都{すべて}', '都'],
  ['存在{そんざい}', '存在'],
  ['選擇性{せんたくせい}', '選擇性'],
  ['剩餘{のこり}', '剩餘'],
  ['兩分鐘{にふん}', '兩分鐘'],
  ['就好{できます}', '就好'],
  ['所需{しょよう}', '所需'],
  ['所需{しょようじ}', '所需'],
  ['表示九點兩分{くじにふん}', '表示九點兩分'],
  ['表示八點七分{はちじななふん}', '表示八點七分'],
  ['分鐘{ふん}', '分鐘'],
  ['分鐘{ぷん}', '分鐘'],
  ['音變成{なる}', '音變成'],
  ['音變最複雜{さいふくざつ}', '音變最複雜'],
  ['遲到{おくれています}', '遲到'],
  ['遲到{おくれる}', '遲到'],
  ['無音變組{くみ}', '無音變組'],
  ['也可用{もちいる}', '也可用'],
  ['也可用{かのう}', '也可用'],
  ['可用{もちいる}', '可用'],
  ['可用{かのう}', '可用'],
  ['星期一{げつようび}', '星期一'],
  ['星期二{かようび}', '星期二'],
  ['星期三{すいようび}', '星期三'],
  ['星期四{もくようび}', '星期四'],
  ['星期五{きんようび}', '星期五'],
  ['星期六{どようび}', '星期六'],
  ['星期日{にちようび}', '星期日'],
  ['一週{いっしゅう}', '一週'],
  ['收集{しゅうしゅう}', '收集'],
  ['且讀法錯誤{ごさつ}', '且讀法錯誤'],
  ['分類{ぶんるい}', '分類'],
  ['中間{ちゅうかん}', '中間'],
  ['位於{いち}', '位於'],
  ['每週{まいしゅう}', '每週'],
  ['表示每週{まいしゅう}', '表示每週'],
  ['表示在星期三{すいようび}', '表示在星期三'],
  ['與行星{こうせい}', '與行星'],
  ['課外{かがい}', '課外'],
  ['活動{かつどう}', '活動'],
  ['夜{よる}', '夜'],
  ['晚上{よる}', '晚上'],
  ['是周末{しゅうまつ}', '是周末'],
  ['是週末{しゅうまつ}', '是週末'],
  ['週末{しゅうまつ}', '週末'],
  ['放鬆{リラックス}', '放鬆'],
  ['社交{しゃこう}', '社交'],
  ['旅行{りょこう}', '旅行'],
  ['表示從{から}', '表示從'],
  ['計畫{けいかく}', '計畫'],
  ['容易誤讀{ごどく}', '容易誤讀'],
  ['為清音{せいおん}', '為清音'],
  ['是清音{せいおん}', '是清音'],
  ['清音{せいおん}', '清音'],
  ['購物{こうぶつ}', '購物'],
  ['購物{かいもの}', '購物'],
  ['家庭{かてい}', '家庭'],
  ['派對{パーティー}', '派對'],
  ['休息日{やすみび}', '休息日'],
  ['是購買{こうばい}', '是購買'],
  ['或借用{しゃくよう}', '或借用'],
  ['購買{こうばい}', '購買'],
  ['看電影{えいが}', '看電影'],
  ['足球{サッカー}', '足球'],
  ['練習{れんしゅう}', '練習'],
  ['的使用範圍{はんい}', '的使用範圍'],
  ['軌跡{きせき}', '軌跡'],
  ['概念{がいねん}', '概念'],
  ['的概念{がいねん}', '的概念'],
  ['的事物{じぶつ}', '的事物'],
  ['抽象{ちゅうしょう}', '抽象'],
  ['事物{じぶつ}', '事物'],
  ['等抽象{ちゅうしょう}', '等抽象'],
  ['在日本{にほん}', '在日本'],
  ['是日本{にほん}', '是日本'],
  ['日本{にほん}', '日本'],
  ['垃圾{ごみ}', '垃圾'],
  ['可燃{かねん}', '可燃'],
  ['主宰{しゅさい}', '主宰'],
  ['之日{ひ}', '之日'],
  ['起源{きげん}', '起源'],
  ['是唯一{ゆいいつ}', '是唯一'],
  ['結尾{けつび}', '結尾'],
  ['超過{こえる}', '超過'],
  ['限制{せいげん}', '限制'],
  ['用於詢問{たずねる}', '用於詢問'],
  ['詢問{たずねる}', '詢問'],
  ['疑問詞{ぎもんし}', '疑問詞'],
  ['數量{すうりょう}', '數量'],
  ['或年齡{ねんれい}', '或年齡'],
  ['不特定{ふとくてい}', '不特定'],
  ['不確定{ふかくてい}', '不確定'],
  ['物品的數量{すうりょう}', '物品的數量'],
  ['細長物數量{すうりょう}', '細長物數量'],
  ['讀了{よみました}', '讀了'],
  ['只讀了{よみました}', '只讀了'],
  ['借了{かりました}', '借了'],
  ['想讀{よみたい}', '想讀'],
  ['讀書{どくしょ}', '讀書'],
  ['教科書{きょうかしょ}', '教科書'],
  ['用品{ようひん}', '用品'],
  ['文具{ぶんぐ}', '文具'],
  ['讀{よむ}', '讀'],
  ['圖書館{としょかん}', '圖書館'],
  ['小說{しょうせつ}', '小說'],
  ['目標{もくひょう}', '目標'],
  ['搭配量詞時{とき}', '搭配量詞時'],
  ['量詞時{とき}', '量詞時'],
  ['量詞前{まえ}', '量詞前'],
  ['的撥音{はつおん}', '的撥音'],
  ['撥音{はつおん}', '撥音'],
  ['紙張{しちょう}', '紙張'],
  ['請給我{ください}', '請給我'],
  ['照片{しゃしん}', '照片'],
  ['襯衫{シャツ}', '襯衫'],
  ['衣服{いふく}', '衣服'],
  ['郵票{きって}', '郵票'],
  ['郵票{ゆうびん}', '郵票'],
  ['盤子{おさら}', '盤子'],
  ['盤子{さら}', '盤子'],
  ['餐具{しょっき}', '餐具'],
  ['的片{かたまり}', '的片'],
  ['更合適{てきせつ}', '更合適'],
  ['切成{きりわけ}', '切成'],
  ['切分{きりわけ}', '切分'],
  ['食物{しょくもつ}', '食物'],
  ['影印{コピー}', '影印'],
  ['影印{えいいん}', '影印'],
  ['辦公{オフィス}', '辦公'],
  ['用語{ようご}', '用語'],
  ['撲克牌{トランプ}', '撲克牌'],
  ['遊戲{ゲーム}', '遊戲'],
  ['寫了{かきました}', '寫了'],
  ['郵件{ゆうびん}', '郵件'],
  ['保持原音{げんおん}', '保持原音'],
  ['票券{きっぷ}', '票券'],
  ['毛巾{タオル}', '毛巾'],
  ['的布{ぬの}', '的布'],
  ['製品{せいひん}', '製品'],
  ['日用品{にちようひん}', '日用品'],
  ['系統是日語固有{こゆう}', '系統是日語固有'],
  ['的訓讀計數法{ほう}', '的訓讀計數法'],
  ['的特殊性{せい}', '的特殊性'],
  ['蘋果{りんご}', '蘋果'],
  ['但不說{いわない}', '但不說'],
  ['考察{こうさつ}', '考察'],
  ['但本題{ほんだい}', '但本題'],
  ['是最安全{あんぜん}', '是最安全'],
  ['的量詞選擇{せんたく}', '的量詞選擇'],
  ['當不確定{ふかくてい}', '當不確定'],
  ['該{べき}', '該'],
  ['只吃了{たべました}', '只吃了'],
  ['形狀{けいじょう}', '形狀'],
  ['的形狀{けいじょう}', '的形狀'],
  ['不規則{ふきそく}', '不規則'],
  ['包括{ふくむ}', '包括'],
  ['包含{ふくむ}', '包含'],
  ['蛋糕{ケーキ}', '蛋糕'],
  ['蛋糕{けーき}', '蛋糕'],
  ['點餐{てんさい}', '點餐'],
  ['有三個{みっつ}', '有三個'],
  ['買三個{みっつ}', '買三個'],
  ['飯糰{おにぎり}', '飯糰'],
  ['便利商店{コンビニ}', '便利商店'],
  ['天體{てんたい}', '天體'],
  ['星星{ほし}', '星星'],
  ['箱子{はこ}', '箱子'],
  ['雞蛋{たまご}', '雞蛋'],
  ['若用{もちいる}', '若用'],
  ['不是最大{さいだい}', '不是最大'],
  ['系統最多{さいた}', '系統最多'],
  ['系統只能{のみ}', '系統只能'],
  ['使用其他量詞或直接{ちょくせつ}', '使用其他量詞或直接'],
  ['音必須轉為{てんい}', '音必須轉為'],
  ['音轉為{てんい}', '音轉為'],
  ['爆破音{ばくはつおん}', '爆破音'],
  ['不觸發任何{なんの}', '不觸發任何'],
  ['觸發任何{なんの}', '觸發任何'],
  ['無濁音化{むだくおんか}', '無濁音化'],
  ['無半濁音化{むはんだくおんか}', '無半濁音化'],
  ['必定{かならず}', '必定'],
  ['的音變模式{もしき}', '的音變模式'],
  ['尾數{びすう}', '尾數'],
  ['的尾數{びすう}', '的尾數'],
  ['決定{けってい}', '決定'],
  ['所以{だから}', '所以'],
  ['使{つか}', '使'],
  ['使{しめす}', '使'],
  ['繪畫{かいが}', '繪畫'],
  ['道具{どうぐ}', '道具'],
  ['服飾{ふくしょく}', '服飾'],
  ['地名{ちめい}', '地名'],
  ['點了{ちゅうもん}', '點了'],
  ['路線{ろせん}', '路線'],
  ['動物{どうぶつ}', '動物'],
  ['部位{ぶい}', '部位'],
  ['身體{からだ}', '身體'],
  ['運動{うんどう}', '運動'],
  ['因為{なぜなら}', '因為'],
  ['因為{いんい}', '因為'],
  ['不受{うけない}', '不受'],
  ['會{だろう}', '會'],
  ['讀法都{すべて}', '讀法都'],
  ['月份都{すべて}', '月份都'],
  ['以上全部{ぜんぶ}', '以上全部'],
  ['規則在時間中的特殊處理{しょり}', '規則在時間中的特殊處理'],
  ['發音時{とき}', '發音時'],
  ['計數方法{ほうほう}', '計數方法'],
  ['不對{ちがう}', '不對'],
  ['不對{ふたい}', '不對'],
  ['人數量詞切換為{に}', '人數量詞切換為'],
  ['切換為{に}', '切換為'],
  ['才{はじめて}', '才'],
  ['家庭{かぞく}', '家庭'],
  ['有四個人{よにん}', '有四個人'],
  ['三個人{さんにん}', '三個人'],
  ['討論{はなしあいました}', '討論'],
  ['四個人{よにん}', '四個人'],
  ['五個人{ごにん}', '五個人'],
  ['有五個人{ごにん}', '有五個人'],
  ['團隊{チーム}', '團隊'],
  ['出席{しゅっせき}', '出席'],
  ['日本{にほん}', '日本'],
  ['的著名{ゆうめい}', '的著名'],
  ['的經典{けいてん}', '的經典'],
  ['小組{グループ}', '小組'],
  ['有七個人{ななにん}', '有七個人'],
  ['六個人{ろくにん}', '六個人'],
  ['住宿{しゅくはく}', '住宿'],
  ['八個人{はちにん}', '八個人'],
  ['不足{ふそく}', '不足'],
  ['乘車{じょうしゃ}', '乘車'],
  ['棒球隊{やきゅうチーム}', '棒球隊'],
  ['九個人{きゅうにん}', '九個人'],
  ['班級{クラス}', '班級'],
  ['有十個人{じゅうにん}', '有十個人'],
  ['十個人{じゅうにん}', '十個人'],
  ['參加{さんか}', '參加'],
  ['足球隊{サッカーチーム}', '足球隊'],
  ['十一個人{じゅういちにん}', '十一個人'],
  ['比賽{しあい}', '比賽'],
  ['一隊{いちチーム}', '一隊'],
  ['陪審員{ばいしんいん}', '陪審員'],
  ['有十二個人{じゅうににん}', '有十二個人'],
  ['參加者{さんかしゃ}', '參加者'],
  ['有十四個人{じゅうよにん}', '有十四個人'],
  ['橄欖球隊{ラグビーチーム}', '橄欖球隊'],
  ['十五個人{じゅうごにん}', '十五個人'],
  ['有二十個人{にじゅうにん}', '有二十個人'],
  ['二十個人{にじゅうにん}', '二十個人'],
  ['三十個人{さんじゅうにん}', '三十個人'],
  ['會議室{かいぎしつ}', '會議室'],
  ['容納{いれます}', '容納'],
  ['容納{いれる}', '容納'],
  ['容量{ようりょう}', '容量'],
  ['五十個人{ごじゅうにん}', '五十個人'],
  ['的和歌{わか}', '的和歌'],
  ['紙牌{かるた}', '紙牌'],
  ['客人{きゃくさん}', '客人'],
  ['來了{きました}', '來了'],
  ['同音{どうおん}', '同音'],
  ['但因禁忌而避免{さける}', '但因禁忌而避免'],
  ['避免{さける}', '避免'],
  ['不是文法{ぶんぽう}', '不是文法'],
  ['不是原因{げんいん}', '不是原因'],
  ['死者{ししゃ}', '死者'],
  ['已經{すでに}', '已經'],
  ['居住{きょじゅう}', '居住'],
  ['夫妻{ふうふ}', '夫妻'],
  ['分組{ぶんぐみ}', '分組'],
  ['幾個人{いくにん}', '幾個人'],
  ['人數疑問詞{ぎもんし}', '人數疑問詞'],
  ['是詢問{たずねる}', '是詢問'],
  ['人數的疑問詞{ぎもんし}', '人數的疑問詞'],
  ['不是正確疑問詞{ぎもんし}', '不是正確疑問詞'],
  ['量詞疑問詞{ぎもんし}', '量詞疑問詞'],
  ['一般物品數量{すうりょう}', '一般物品數量'],
  ['禁忌的理解{りかい}', '禁忌的理解'],
  ['需要特別{とくべつ}', '需要特別'],
  ['混淆{こんどう}', '混淆'],
  ['人口{じんこう}', '人口'],
  ['統計{とうけい}', '統計'],
  ['大數字{だいすうじ}', '大數字'],
  ['學生{がくせい}', '學生'],
  ['學生{せいと}', '學生'],
  ['教室{きょうしつ}', '教室'],
  ['最多{さいたか}', '最多'],
  ['標示{ひょうじ}', '標示'],
  ['在排隊{ならぶ}', '在排隊'],
  ['排隊{ならぶ}', '排隊'],
  ['員工{しゃいん}', '員工'],
  ['演唱會{コンサート}', '演唱會'],
  ['一千個人{せんにん}', '一千個人'],
  ['大型{おおがた}', '大型'],
  ['兩個人{ふたり}', '兩個人'],
  ['小孩{こども}', '小孩'],
  ['是飯店{ホテル}', '是飯店'],
  ['飯店{ホテル}', '飯店'],
  ['七個人{しちにん}', '七個人'],
  ['七個人{ななにん}', '七個人'],
  ['面試{めんせつ}', '面試'],
  ['預計{よてい}', '預計'],
  ['這些{これら}', '這些'],
  ['也有特殊注意事項{じこう}', '也有特殊注意事項'],
  ['對所有{すべて}', '對所有'],
  ['所有{すべて}', '所有'],
  ['特殊讀法的理解{りかい}', '特殊讀法的理解'],
  ['表示國籍{こくせき}', '表示國籍'],
  ['國籍{こくせき}', '國籍'],
  ['或民族{みんぞく}', '或民族'],
  ['民族{みんぞく}', '民族'],
  ['數字後面接{つなぐ}', '數字後面接'],
  ['有明確{めいかく}', '有明確'],
  ['明確{めいかく}', '明確'],
  ['清楚{はっきり}', '清楚'],
  ['需要清楚{はっきり}', '需要清楚'],
  ['的讀法分類{ぶんるい}', '的讀法分類'],
  ['全面{ぜんめん}', '全面'],
  ['但回答通常{つうじょう}', '但回答通常'],
  ['預約用語{ようご}', '預約用語'],
  ['預約時{とき}', '預約時'],
  ['構成{こうせい}', '構成'],
  ['組成{こうせい}', '組成'],
  ['在等候{まつ}', '在等候'],
  ['等候{たいき}', '等候'],
  ['購票{こうひょう}', '購票'],
  ['交通{こうつう}', '交通'],
  ['志工{ボランティア}', '志工'],
  ['集合{あつまりました}', '集合'],
  ['集合{あつまった}', '集合'],
  ['錄取{さいよう}', '錄取'],
  ['求職{きゅうしょく}', '求職'],
  ['人數時{とき}', '人數時'],
  ['養了{かっています}', '養了'],
  ['一隻{いっぴき}', '一隻'],
  ['有一隻{いっぴき}', '有一隻'],
  ['貓{ねこ}', '貓'],
  ['狗{いぬ}', '狗'],
  ['寵物{ペット}', '寵物'],
  ['話題{わだい}', '話題'],
  ['金魚{きんぎょ}', '金魚'],
  ['兩條{にひき}', '兩條'],
  ['魚{さかな}', '魚'],
  ['有兩隻{にひき}', '有兩隻'],
  ['蟲{むし}', '蟲'],
  ['昆蟲{こんちゅう}', '昆蟲'],
  ['小狗{こいぬ}', '小狗'],
  ['三隻{さんびき}', '三隻'],
  ['出生{しゅっしょう}', '出生'],
  ['看到{みました}', '看到'],
  ['蝴蝶{ちょうちょう}', '蝴蝶'],
  ['觀察{かんさつ}', '觀察'],
  ['六隻{ろっぴき}', '六隻'],
  ['兔子{ウサギ}', '兔子'],
  ['兔子{うさぎ}', '兔子'],
  ['飼養{しいく}', '飼養'],
  ['池塘{いけ}', '池塘'],
  ['有六條{ろっぴき}', '有六條'],
  ['鯉魚{こい}', '鯉魚'],
  ['有十隻{じゅっぴき}', '有十隻'],
  ['螞蟻{アリ}', '螞蟻'],
  ['螞蟻{あり}', '螞蟻'],
  ['至少{すくなくとも}', '至少'],
  ['十條{じゅっぴき}', '十條'],
  ['熱帶魚{ねったいぎょ}', '熱帶魚'],
  ['水族館{すいぞくかん}', '水族館'],
  ['參觀{さんかん}', '參觀'],
  ['轉換規律適用於所有{すべて}', '轉換規律適用於所有'],
  ['應使用專用{せんよう}', '應使用專用'],
  ['是常見的寵物{ペット}', '是常見的寵物'],
  ['小型犬{こがたけん}', '小型犬'],
  ['大型犬{おおがたけん}', '大型犬'],
  ['小動物{しょうどうぶつ}', '小動物'],
  // Leftover Japanese grammar in Chinese context
  ['讀まない{よまない}', '不讀'],
  // は in Chinese context (careful - only clear cases)
  ['「いっち」這個讀法。', '「いっち」這個讀法。'],
]

// ─── Regex-based fixes for patterns ───
const REGEX_FIXES = [
  // の still in Chinese context
  [/訓讀の人數/g, '訓讀的人數'],
  [/訓讀の切換/g, '訓讀的切換'],
  [/の讀法/g, '的讀法'],
  [/の訓讀/g, '的訓讀'],
  [/の音讀/g, '的音讀'],
  [/の問法/g, '的問法'],
  [/の特殊讀法/g, '的特殊讀法'],
  [/の使用/g, '的使用'],
  [/の使{つか}/g, '的使'],
  // は in Chinese context
  [/」は特殊/g, '」是特殊'],
  [/」は日語/g, '」是日語'],
  [/」は日期/g, '」是日期'],
  [/」は促音化/g, '」是促音化'],
  // から in Chinese context
  [/從{から}三/g, '從三'],
  [/從{から}家/g, '從家'],
]

// ─── Process files ───

const datesPracticeDir = resolve(root, 'src/data/questions/datesPractice')
const subdirs = ['numbers', 'timeDate', 'counters']

let totalFiles = 0
let totalReplacements = 0

for (const subdir of subdirs) {
  const dir = resolve(datesPracticeDir, subdir)
  let files
  try {
    files = readdirSync(dir).filter(f => f.endsWith('.ts') && f !== 'index.ts')
  } catch (e) {
    console.log(`Skipping ${subdir}: ${e.message}`)
    continue
  }

  for (const file of files) {
    const filePath = resolve(dir, file)
    let content = readFileSync(filePath, 'utf-8')
    const original = content
    let fileReplacements = 0

    // Apply string replacements
    for (const [from, to] of MORE_REPLACEMENTS) {
      const count = content.split(from).length - 1
      if (count > 0) {
        content = content.replaceAll(from, to)
        fileReplacements += count
      }
    }

    // Apply regex fixes
    for (const [regex, replacement] of REGEX_FIXES) {
      const matches = content.match(regex)
      if (matches) {
        content = content.replace(regex, replacement)
        fileReplacements += matches.length
      }
    }

    if (content !== original) {
      writeFileSync(filePath, content, 'utf-8')
      console.log(`  ✓ ${subdir}/${file}: ${fileReplacements} replacements`)
      totalReplacements += fileReplacements
      totalFiles++
    } else {
      console.log(`  - ${subdir}/${file}: no changes needed`)
    }
  }
}

console.log(`\nDone: ${totalReplacements} replacements across ${totalFiles} files.`)

// ─── Report remaining furigana in explanation fields ───
console.log('\n--- Remaining furigana patterns (may need manual review) ---')
for (const subdir of subdirs) {
  const dir = resolve(datesPracticeDir, subdir)
  let files
  try {
    files = readdirSync(dir).filter(f => f.endsWith('.ts') && f !== 'index.ts')
  } catch (e) {
    continue
  }

  for (const file of files) {
    const filePath = resolve(dir, file)
    const content = readFileSync(filePath, 'utf-8')
    const lines = content.split('\n')
    const remaining = new Set()
    for (const line of lines) {
      if (line.includes('reason:') || line.includes('correctRule:') ||
          line.includes('trapExplanation:') || line.includes('relatedRules:')) {
        const matches = line.matchAll(/([\u4e00-\u9fff\u3400-\u4dbf\u3005\u3007]+)\{([^{}]+)\}/g)
        for (const match of matches) {
          remaining.add(`${match[1]}{${match[2]}}`)
        }
      }
    }
    if (remaining.size > 0) {
      console.log(`  ${subdir}/${file}: ${[...remaining].join(', ')}`)
    }
  }
}
